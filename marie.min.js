class MarieJS{constructor(i={}){this.config={parseTo:"hexadecimal",memorySize:4096,errorLogging:!1,debug:!1,logging:!0},this.logging=[],Object.assign(this.config,i),this.memory=new Array(this.config.memorySize).fill(0),this.AC=0,this.MQ=0,this.PC=0,this.IR=0,this.MAR=0,this.MDR=0,this.parse=function(i){const t=this.config.parseTo.toLowerCase().substring(0,3);return"hex"==t?i.toString(16).toUpperCase():"dec"==t?i.toString(10):"bin"==t?i.toString(2):"oct"==t?i.toString(8):i.toString(16).toUpperCase()}}#i(i){if(this.config.errorLogging&&(i<0||i>=this.memory.length)||isNaN(i))return!1;this.MAR=i,this.MDR=this.memory[this.MAR],this.AC=this.MDR,this.config.logging&&this.logging.push(`Load: AC=${this.AC}`)}#t(i){if(this.config.errorLogging&&(i<0||i>=this.memory.length)||isNaN(i))return!1;this.MAR=i,this.memory[this.MAR]=this.AC,this.config.logging&&this.logging.push(`Store: Memory[${this.MAR}] = ${this.AC}`)}#s(i){if(this.config.errorLogging&&(i<0||i>=this.memory.length)||isNaN(i))return!1;this.MAR=i,this.MDR=this.memory[this.MAR],this.AC+=this.MDR,this.config.logging&&this.logging.push(`Add: AC = ${this.AC}`)}#r(i){if(this.config.errorLogging&&(i<0||i>=this.memory.length)||isNaN(i))return!1;this.MAR=i,this.MDR=this.memory[this.MAR],this.AC-=this.MDR,this.config.logging&&this.logging.push(`Subtract: AC = ${this.AC}`)}#h(){const i=prompt("Enter a number: ");if(this.AC=parseInt(i),this.config.errorLogging&&isNaN(this.AC))return!1;this.config.logging&&this.logging.push(`Input: AC = ${this.AC}`)}#o(){if(this.config.errorLogging&&(this.AC<0||this.AC>=this.memory.length)||isNaN(this.AC))return!1;this.config.logging&&this.logging.push(`Output: AC = ${this.parse(this.AC)}`)}#g(){return!(this.config.errorLogging&&(this.PC<0||this.PC>=this.memory.length)||isNaN(this.PC))&&(this.MAR=this.PC,this.IR=this.memory[this.MAR],this.IR)}#e(i){if(this.config.errorLogging&&(i<0||i>=this.memory.length)||isNaN(i))return!1;const t=this.#n(i);return 1==t.opcode?this.#i(t.address):2==t.opcode?this.#t(t.address):3==t.opcode?this.#s(t.address):4==t.opcode?this.#r(t.address):5==t.opcode?this.#h():6==t.opcode?this.#o():void 0}#n(i){if(this.config.errorLogging&&(i<0||i>=this.memory.length)||isNaN(i))return;return{opcode:i>>8,address:255&i}}#m(){this.PC+=1,this.config.debug}run(){for(;!(this.config.errorLogging&&(this.PC<0||this.PC>=this.memory.length)||isNaN(this.PC));){const i=this.#g();if(!1===this.#e(i))break;if(this.#m(),3840==i)break}}assemble(i){if(!Array.isArray(i))throw new Error("Programs should be an array");i.includes(3840)||i.push(3840);for(const t in i)this.memory[t]=i[t]}getMemory(){if(!(this.config.errorLogging&&(this.memory<0||this.memory>=this.memory.length)||isNaN(this.memory)))return this.memory}getRegisters(){return{AC:this.AC,MQ:this.MQ,PC:this.PC,IR:this.IR,MAR:this.MAR,MDR:this.MDR}}ins={LOAD:i=>256|255&i,STORE:i=>512|255&i,ADD:i=>768|255&i,SUBTRACT:i=>1024|255&i,INPUT:()=>1280,OUTPUT:()=>1536,HALT:()=>3840};getLogging(){return this.logging}}